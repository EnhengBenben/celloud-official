<link href="$link.getContextPath()/css/print_bsi.css" rel="stylesheet">
<div class="content">
  <div class="print-button">
    <a id="print-report" class="btn" href="javascript:void(0)"><i class="fa fa-print"></i></a>
    <a id="reset-info" class="btn" href="javascript:void(0)"><i class="fa fa-print"></i></a>
  </div>
    <div class="title-content">
      <div class="title">细菌性血流感染检测报告</div>
      <div class="sub-title">分析报告</div>
    </div>
    <form id="print-form">
      <div class="base-info">
        #parse("/default/118/base_info.vm")
      </div>
      <div class="tests-content">
        <h4>检测结果：</h4>
        <div class="tests-info">
           #if($bsi.species_20)
              #foreach($species_20 in $!bsi.species_20) 
                <p>
                  #if($species_20.species_zh.equals("未知") || !$species_20.species_zh)
                    $!species_20.species
                  #else
                    $!species_20.species_zh
                    #if($havestrain)
                        #set ($havestrain="$!havestrain,$!species_20.species_zh")
                    #else
                        #set ($havestrain="$!species_20.species_zh")
                    #end
                  #end
                </p>
              #end
            #end
        </div>
        <table class="table table-20species">
            <tbody>
             <tr>
               <td class="title" rowspan="2">革兰氏阳性$havestrain</td>
               #if($havestrain.contains('牛链球菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               牛链球菌
               </td>
               #if($havestrain.contains('葡萄球菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                                     葡萄球菌
               </td>
               #if($havestrain.contains('肺炎链球菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               肺炎链球菌
               </td>
               #if($havestrain.contains('粪肠球菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               粪肠球菌
               </td>
             </tr>
             <tr>
               #if($havestrain.contains('屎肠球菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               屎肠球菌
               </td>
               #if($havestrain.contains('难辨梭状芽孢杆菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               难辨梭状芽孢杆菌
               </td>
               #if($havestrain.contains('溃疡棒状杆菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                              溃疡棒状杆菌
               </td>
               #if($havestrain.contains('结膜干燥杆菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               结膜干燥杆菌
               </td>
             </tr>
             <tr>
               <td class="title" rowspan="3">革兰氏阴性</td>
               #if($havestrain.contains('大肠埃希菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               大肠埃希菌
               </td>
               #if($havestrain.contains('铜绿假单胞菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                              铜绿假单胞菌
               </td>
               #if($havestrain.contains('鲍曼不动杆菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               鲍曼不动杆菌
               </td>
               #if($havestrain.contains('肺炎克雷伯氏菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               肺炎克雷伯氏菌
               </td>
             </tr>
             <tr>
               #if($havestrain.contains('嗜麦芽窄食单胞菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               嗜麦芽窄食单胞菌
               </td>
               #if($havestrain.contains('粘质沙雷氏菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               粘质沙雷氏菌
               </td>
               #if($havestrain.contains('阴沟肠杆菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                              阴沟肠杆菌
               </td>
               #if($havestrain.contains('嗜水气单胞菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               嗜水气单胞菌
               </td>
             </tr>
             <tr>
               #if($havestrain.contains('产气肠杆菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               产气肠杆菌
               </td>
               #if($havestrain.contains('肠炎沙门菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               肠炎沙门菌
               </td>
               #if($havestrain.contains('奇异变形杆菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                              奇异变形杆菌
               </td>
               #if($havestrain.contains('洋葱伯克霍尔德菌'))
                   <td class="hasit"><i class="fa fa-circle" aria-hidden="true"></i>
               #else
                   <td><i class="fa fa-circle-o" aria-hidden="true"></i>
               #end
                               洋葱伯克霍尔德菌
               </td>
             </tr>
            </tbody>
          </table>
          <table id="test-seq-table" class="table seq-table">
            <thead>
              <tr>
                <th style="max-width: 119px;">菌名</th>
                <th width="85">序列比重</th>
                <th width="85">检出区域</th>
                <th width="380">序列 (5'-3')</th>
              </tr>
            </thead>
            <tbody>
              #set ($seqNum=0)
              #if($bsi.species_20)
                  #foreach($species_20 in $!bsi.species_20) 
                     #set($srowspan = 1)
                     #if($species_20.seq2 && !$!species_20.seq2.equals(""))
                       #set($srowspan=$srowspan+1)
                     #end
                     #if($species_20.seq3 && !$!species_20.seq3.equals(""))
                       #set($srowspan=$srowspan+1)
                     #end
                     #if($species_20.seq4 && !$!species_20.seq4.equals(""))
                      #set($srowspan=$srowspan+1)
                     #end
                   <tr>
                     <td class="title" rowspan="$!srowspan">
                       #if($species_20.species_zh.equals("未知") || !$species_20.species_zh|| $species_20.species_zh.trim().equals(""))
                        $!species_20.species
                       #else
                        $!species_20.species_zh
                      #end
                       <br>
                       <svg width="120" height="20">
                         <g>
                           <rect x="0" y="0" width="30" height="20" fill="
                             #if(!$species_20.site1.equals("0,0"))
                                #dcdcdc
                             #else
                                #fff
                             #end "
                             style="stroke:#8c8c8c;fill-opacity:0.4;stroke-opacity:0.9"></rect>
                           <text x="8" y="15">V1</text>
                           <rect x="30" y="0" width="30" height="20" fill="
                             #if(!$species_20.site2.equals("0,0"))
                                #dcdcdc
                             #else
                                #fff
                             #end "
                             style="stroke:#8c8c8c;fill-opacity:0.4;stroke-opacity:0.9"></rect>
                           <text x="38" y="15">V2</text>
                           <rect x="60" y="0" width="30" height="20" fill="
                             #if(!$species_20.site3.equals("0,0"))
                                #dcdcdc
                             #else
                                #fff
                             #end "
                             style="stroke:#8c8c8c;fill-opacity:0.4;stroke-opacity:0.9"></rect>
                           <text x="68" y="15">V3</text>
                           <rect x="90" y="0" width="30" height="20" fill="
                             #if(!$species_20.site4.equals("0,0"))
                                #dcdcdc
                             #else
                                #fff
                             #end "
                             style="stroke:#8c8c8c;fill-opacity:0.4;stroke-opacity:0.9"></rect>
                           <text x="98" y="15">V4</text>
                         </g>
                       </svg>
                     </td>
                     <td class="sub-title" rowspan="$!srowspan">$!species_20.unique_reads_num </td>
                     <td>$!species_20.seq1_name </td>
                     <td>
                       <div class="seq">$!species_20.seq1_no <br>$!species_20.seq1 </div>
                     </td>
                   </tr>
                   #if(!$species_20.seq2|| $species_20.seq2.trim().equals(""))
                   <tr>
                     <td>$!species_20.seq2_name </td>
                     <td>
                        <div class="seq">$!species_20.seq2_no <br>$!species_20.seq2 </div>
                     </td>
                   </tr>
                   #end
                   #if(!$species_20.seq3|| $species_20.seq3.trim().equals(""))
                   <tr>
                     <td>$!species_20.seq3_name </td>
                     <td>
                        <div class="seq">$!species_20.seq3_no <br>$!species_20.seq3 </div>
                     </td>
                   </tr>
                   #end
                   #if(!$species_20.seq4|| $species_20.seq4.trim().equals(""))
                   <tr>
                     <td>$!species_20.seq4_name </td>
                     <td>
                        <div class="seq">$!species_20.seq4_no <br>$!species_20.seq4 </div>
                     </td>
                   </tr>
                   #end
                 #end
               #end    
            </tbody>
          </table>
          <p>序列比重：需要增加一个公式...> 10 reads时为检出<br>
                            快速序列验证及比对(NCBI Blast): <a href="http://blast.ncbi.nlm.nih.gov/Blast.cgi?PROGRAM=blastn&PAGE_TYPE=BlastSearch&LINK_LOC=blasthome" target="_blank">http://blast.ncbi.nlm.nih.gov/Blast.cgi?PROGRAM=blastn&PAGE_TYPE=BlastSearch&LINK_LOC=blasthome</a></p>
          <h4>统计信息</h4>
          <table class="table table-count">
            <tr>
              <td>序列总数</td>
              <td>平均质量</td>
              <td>平均GC含量</td>
              <td>human序列总数</td>
              <td>16S序列总数</td>
              <td>低质量序列总数</td>
            </tr>
            <tr>
              <td>$!bsi.totalReads</td>
              <td>$!bsi.avgQuality</td>
              <td>$!bsi.avgGCContent</td>
              <td>$!bsi.human_reads</td>
              <td>$!bsi.reads_16s</td>
              <td>$!bsi.low_quality_reads</td>
            </tr>
          </table>
          <p>
            序列总数：测序出来的总的DNA片段数<br>
            平均质量：本地测序的所有片段质量平均数，高于25时为高质量序列
          </p>
      </div>
      <div class="tests-footer">
      </div>
    </form>
</div>