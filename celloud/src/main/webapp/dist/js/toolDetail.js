var detailHelper={init:function(){var e=detailHelper;e.loadGuigeFunc(),$("#buyBtn").click(e.buyBtnClickFunc),e.getTuijianProductFunc()},loadGuigeFunc:function(){for(var e=detailHelper,i=order_config.list,r="",t=0;t<i.length;t++)r+='<a href="javascript:;" class="unit" target="_self" title="'+i[t].skuCode+'">'+i[t].skuName+"</a>";$("#format-right").append(r),$("#format-right a").eq(0).addClass("current"),$("#format-right a").click(function(){e.guigeClickFunc($(this));var i=this;$.each(window.refundConfigs.list||[],function(e,r){$(i).attr("title")==r.skuCode&&(r.skuIsRefund?$(".btj-icon-t").show():$(".btj-icon-t").hide())})}),e.loadCyclesFunc(0)},guigeClickFunc:function(e){var i=detailHelper;$.each($(e).siblings(),function(e,i){$(i).removeClass("current")}),$(e).addClass("current"),$("#order-right").empty();var r=$("#format-right a").index($(e));i.loadCyclesFunc(r),i.queryPriceFunc()},loadCyclesFunc:function(e){for(var i=detailHelper,r=order_config.list[e].cycles,t="",c=0;c<r.length;c++)t+='<a href="javascript:;" class="unit" target="_self" title="'+r[c].unit+'">'+r[c].name+"</a>";$("#order-right").append(t),$("#order-right a").eq(0).addClass("current"),$("#order-right a").click(function(){i.cyclesClickFunc($(this))})},cyclesClickFunc:function(e){var i=detailHelper;$.each($(e).siblings(),function(e,i){$(i).removeClass("current")}),$(e).addClass("current"),i.queryPriceFunc()},queryPriceFunc:function(){var e=detailHelper;e.blankPriceInfoFunc();var i=$("#order-right a.current").attr("title"),r=$("#format-right a.current").attr("title"),t={account_quanlity:0,orderUnit:i,productCode:productId,skuCode:r,_csrf_token:csrfToken};if($.get(inquiryUrl,t,function(i){e.renderPriceFunc(i)}),5!=i){var c={orderType:"RENEW",account_quanlity:0,orderUnit:i,productCode:productId,skuCode:r,_csrf_token:csrfToken};$.get(inquiryUrl,c,function(e){e=JSON.parse(e);var i=e.renewPrice;i&&"0.00"!=i?($("#priceDiv .renewprice .price span").html(i),$("#priceDiv .renewprice").show()):$("#priceDiv .renewprice").hide()})}},renderPriceFunc:function(e){e=JSON.parse(e);var i=e.cuxiao,r=e.negotiablePrice;if(void 0==i){$("#priceDiv .oldprice").hide(),$("#priceDiv .cuxiaoprice").hide();var t=e.newPrice;$("#priceDiv .newprice .price span").html(t),$("#priceDiv .newprice").show(),0===$(".market-face-discu").length&&$("#priceDiv .newprice .price").after("\n <i class='market-face market-face-discu' title='可以和服务商先行沟通，在服务商&#13;修改订单价格后再进行支付'>可面议</i>"),r?$(".market-face-discu").show():$(".market-face-discu").hide()}else{$("#priceDiv .newprice").hide();var c=e.originalAmount;$("#priceDiv .oldprice del").html("¥"+c);var t=e.newPrice;$("#priceDiv .cuxiaoprice .price span").html(t);var n=e.ruleTitle;$("#priceDiv .cuxiaoprice .tip").html(n),$("#priceDiv .oldprice").show(),$("#priceDiv .cuxiaoprice").show(),0===$(".market-face-cu").length&&$("#priceDiv .cuxiaoprice .tip").after("\n <i class='market-face market-face-cu' title='可以和服务商先行沟通，在服务商&#13;修改订单价格后再进行支付'>可面议</i>"),r?$(".market-face-cu").show():$(".market-face-cu").hide()}},blankPriceInfoFunc:function(){$("#priceDiv .newprice .price span").empty(),$("#priceDiv .newprice").show(),$("#priceDiv .oldprice").hide(),$("#priceDiv .cuxiaoprice").hide(),$("#priceDiv .renewprice").hide()},buyBtnClickFunc:function(){var e=$("#order-right a.current").attr("title"),i=$("#format-right a.current").attr("title");window.location.href=window.submitUrl+"?productId="+window.productId+"&skuCode="+i+"&orderUnit="+e+"&account_quanlity=0"},getTuijianProductFunc:function(){var e=detailHelper,i={categoryId:categoryId,productCode:productId,_csrf_token:csrfToken};$.post(getTuijianProductsUrl,i,function(i){i&&i.length>0&&e.renderTuijianProductFunc(i)})},renderTuijianProductFunc:function(e){var i="";$.each(e,function(e,r){var t=r.price?"<p>价格：<span><em>"+r.price+"</em>元</span></p>":"";i+='<li><a href="'+r.detailLink+'" target="_blank"><img src="'+r.smallPicUrl+'" alt=""></a><div class="intro"><h6 style="width: 150px; height: 20px; overflow: hidden;" title="'+r.productName+'"><a class="reco-hd-link" href="'+r.detailLink+'" target="_blank">'+r.productName+'</a></h6>    <p>来源：<a class="y-blue" href="/store/'+r.supplierId+'.html">'+r.supplierCompanyName+"</a></p>"+t+"</div></li>"}),$("#tuijianProductsDiv").find("ul").empty().html(i),$("#tuijianProductsDiv").show()}};$(function(){detailHelper.init(),$("#format-right a.current").trigger("click"),$(window).scroll(function(){$(window).scrollTop()<$("#1").offset().top?$(".inner-link li").eq(0).addClass("select").siblings("li").removeClass("select"):$(window).scrollTop()>$("#1").offset().top&&$(window).scrollTop()<$("#2").offset().top?$(".inner-link li").eq(1).addClass("select").siblings("li").removeClass("select"):$("#2")&&$("#3")&&$(window).scrollTop()>$("#2").offset().top&&$(window).scrollTop()<$("#3").offset().top?$(".inner-link li").eq(2).addClass("select").siblings("li").removeClass("select"):$("#3")&&$(window).scrollTop()>$("#3").offset().top&&$(window).scrollTop()+10<("undefined"==typeof $("#4").offset()?$(window).scrollTop():$("#4").offset().top)?$(".inner-link li").eq(3).addClass("select").siblings("li").removeClass("select"):$("#4")&&$(window).scrollTop()+10>("undefined"==typeof $("#4").offset()?$(window).scrollTop():$("#4").offset().top)&&$(".inner-link li").eq(4).addClass("select").siblings("li").removeClass("select")}),$(window).scroll(function(){$(window).scrollTop()>$(".link").offset().top?$(".inner-link").addClass("fixed"):$(".inner-link").removeClass("fixed")}),$(".link li").each(function(){$(this).click(function(e){e.preventDefault();var i=$(".link li").index(this),r=$(".box-icon").eq(i).offset().top;$("html,body").stop().animate({scrollTop:r-46},1e3)})})});