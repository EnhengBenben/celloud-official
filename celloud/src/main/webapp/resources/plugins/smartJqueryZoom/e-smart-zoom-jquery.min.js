(function(a){a.fn.smartZoom=function(c){var i=this;function h(E){}h.ZOOM="SmartZoom_ZOOM";h.PAN="SmartZoom_PAN";h.START="START";h.END="END";h.DESTROYED="SmartZoom_DESTROYED";var y={init:function(F){var H=a.extend({"top":"0","left":"0","width":"100%","height":"100%","easing":"smartZoomEasing","initCallback":null,"maxScale":3,"dblClickMaxScale":1.8,"mouseEnabled":true,"scrollEnabled":true,"dblClickEnabled":true,"mouseMoveEnabled":true,"moveCursorEnabled":true,"adjustOnResize":true,"touchEnabled":true,"dblTapEnabled":true,"zoomOnSimpleClick":false,"pinchEnabled":true,"touchMoveEnabled":true,"containerBackground":"#FFFFFF","containerClass":""},F);var I=i.attr("style");var G="smartZoomContainer"+new Date().getTime();var J=a('<div id="'+G+'" class="'+H.containerClass+'"></div>');i.before(J);i.remove();J=a("#"+G);J.css({"overflow":"hidden"});if(H.containerClass==""){J.css({"background-color":H.containerBackground})}J.append(i);var E=new Object();E.lastTouchEndTime=0;E.lastTouchPositionArr=null;E.touchMove=false;E.touchPinch=false;i.data("smartZoomData",{settings:H,containerDiv:J,originalSize:{width:i.width(),height:i.height()},originalPosition:i.offset(),transitionObject:C(),touch:E,mouseWheelDeltaFactor:0.15,currentWheelDelta:0,adjustedPosInfos:null,moveCurrentPosition:null,moveLastPosition:null,mouseMoveForPan:false,currentActionType:"",initialStyles:I,currentActionStep:""});g();if(H.touchEnabled==true){i.bind("touchstart.smartZoom",u)}if(H.mouseEnabled==true){if(H.mouseMoveEnabled==true){i.bind("mousedown.smartZoom",b)}if(H.scrollEnabled==true){J.bind("mousewheel.smartZoom",r);J.bind("mousewheel.smartZoom DOMMouseScroll.smartZoom",D)}if(H.dblClickEnabled==true&&H.zoomOnSimpleClick==false){J.bind("dblclick.smartZoom",x)}}document.ondragstart=function(){return false};if(H.adjustOnResize==true){a(window).bind("resize.smartZoom",A)}if(H.initCallback!=null){H.initCallback.apply(this,i)}},zoom:function(H,K,E){var I=i.data("smartZoomData");var Q;var O;if(!K){var G=p(I.containerDiv);Q=G.x+G.width/2;O=G.y+G.height/2}else{Q=K.x;O=K.y}q(h.ZOOM);var P=w(true);var F=I.originalSize;var U=(P.width/F.width)+H;U=Math.max(I.adjustedPosInfos.scale,U);U=Math.min(I.settings.maxScale,U);var M=F.width*U;var R=F.height*U;var V=Q-P.x;var N=O-P.y;var J=M/P.width;var T=P.x-((V*J)-V);var S=P.y-((N*J)-N);var L=k(T,S,M,R);if(E==null){E=700}v(h.ZOOM,h.START,false);e(i,L.x,L.y,M,R,E,function(){I.currentWheelDelta=0;s();v(h.ZOOM,h.END,false)})},pan:function(F,E,J){if(F==null||E==null){return}if(J==null){J=700}var G=i.offset();var I=w();var H=k(G.left+F,G.top+E,I.width,I.height);if(H.x!=G.left||H.y!=G.top){q(h.PAN);v(h.PAN,h.START,false);e(i,H.x,H.y,I.width,I.height,J,function(){v(h.PAN,h.END,false)})}},destroy:function(){var E=i.data("smartZoomData");if(!E){return}q();var F=E.containerDiv;i.unbind("mousedown.smartZoom");i.unbind("touchstart.smartZoom");F.unbind("mousewheel.smartZoom");F.unbind("dblclick.smartZoom");F.unbind("mousewheel.smartZoom DOMMouseScroll.smartZoom");a(window).unbind("resize.smartZoom");a(document).unbind("mousemove.smartZoom");a(document).unbind("mouseup.smartZoom");a(document).unbind("touchmove.smartZoom");a(document).unbind("touchend.smartZoom");i.css({"cursor":"default"});F.before(i);e(i,E.originalPosition.left,E.originalPosition.top,E.originalSize.width,E.originalSize.height,5);i.removeData("smartZoomData");F.remove();i.attr("style",E.initialStyles);i.trigger(h.DESTROYED)},isPluginActive:function(){return i.data("smartZoomData")!=undefined}};if(y[c]){return y[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){if(i[0].tagName.toLowerCase()=="img"&&!i[0].complete){i.bind("load.smartZoom",{arguments:arguments[0]},l)}else{y.init.apply(i,[arguments[0]])}}else{a.error("Method "+c+" does not exist on e-smartzoom jquery plugin")}}function r(F,G){var E=i.data("smartZoomData");if(E.currentWheelDelta*G<0){E.currentWheelDelta=0}E.currentWheelDelta+=G;y.zoom(E.mouseWheelDeltaFactor*E.currentWheelDelta,{"x":F.pageX,"y":F.pageY})}function D(E){E.preventDefault()}function s(){var E=i.data("smartZoomData");if(E.settings.mouseMoveEnabled!=true||E.settings.moveCursorEnabled!=true){return}var G=w();var F=(G.width/E.originalSize.width);if(parseInt(F*100)>parseInt(E.adjustedPosInfos.scale*100)){i.css({"cursor":"move"})}else{i.css({"cursor":"default"})}}function x(E){j(E.pageX,E.pageY)}function b(F){F.preventDefault();a(document).on("mousemove.smartZoom",d);a(document).bind("mouseup.smartZoom",t);var E=i.data("smartZoomData");E.moveCurrentPosition=new B(F.pageX,F.pageY);E.moveLastPosition=new B(F.pageX,F.pageY)}function d(F){var E=i.data("smartZoomData");if(E.mouseMoveForPan||(!E.mouseMoveForPan&&E.moveCurrentPosition.x!=F.pageX&&E.moveCurrentPosition.y!=F.pageY)){E.mouseMoveForPan=true;f(F.pageX,F.pageY,0,false)}}function t(G){var F=i.data("smartZoomData");if(F.mouseMoveForPan){F.mouseMoveForPan=false;if(F.moveLastPosition.distance(F.moveCurrentPosition)>4){var E=F.moveLastPosition.interpolate(F.moveCurrentPosition,-4);f(E.x,E.y,500,true)}else{f(F.moveLastPosition.x,F.moveLastPosition.y,0,true)}}else{if(F.settings.zoomOnSimpleClick){j(G.pageX,G.pageY)}}a(document).unbind("mousemove.smartZoom");a(document).unbind("mouseup.smartZoom")}function u(J){J.preventDefault();a(document).unbind("touchmove.smartZoom");a(document).unbind("touchend.smartZoom");a(document).bind("touchmove.smartZoom",m);a(document).bind("touchend.smartZoom",n);var F=J.originalEvent.touches;var I=F[0];var G=i.data("smartZoomData");G.touch.touchMove=false;G.touch.touchPinch=false;G.moveCurrentPosition=new B(I.pageX,I.pageY);G.moveLastPosition=new B(I.pageX,I.pageY);G.touch.lastTouchPositionArr=new Array();var H;var K=F.length;for(var E=0;E<K;++E){H=F[E];G.touch.lastTouchPositionArr.push(new B(H.pageX,H.pageY))}}function m(U){U.preventDefault();var J=i.data("smartZoomData");var K=U.originalEvent.touches;var W=K.length;var O=K[0];if(W==1&&!J.touch.touchPinch&&J.settings.touchMoveEnabled==true){if(!J.touch.touchMove){var R=J.touch.lastTouchPositionArr[0];if(R.distance(new B(O.pageX,O.pageY))<3){return}else{J.touch.touchMove=true}}f(O.pageX,O.pageY,0,false)}else{if(W==2&&!J.touch.touchMove&&J.settings.pinchEnabled==true){J.touch.touchPinch=true;var V=K[1];var M=J.touch.lastTouchPositionArr[0];var L=J.touch.lastTouchPositionArr[1];var I=new B(O.pageX,O.pageY);var H=new B(V.pageX,V.pageY);var F=I.distance(H);var S=M.distance(L);var Q=F-S;if(Math.abs(Q)<3){return}var X=new B((I.x+H.x)/2,(I.y+H.y)/2);var N=w();var E=J.originalSize;var P=(N.width/E.width);var T=F/S;var G=((N.width*T)/E.width);y.zoom(G-P,X,0);J.touch.lastTouchPositionArr[0]=I;J.touch.lastTouchPositionArr[1]=H}}}function n(H){H.preventDefault();var I=H.originalEvent.touches.length;if(I==0){a(document).unbind("touchmove.smartZoom");a(document).unbind("touchend.smartZoom")}var G=i.data("smartZoomData");if(G.touch.touchPinch){return}if(G.touch.touchMove){if(G.moveLastPosition.distance(G.moveCurrentPosition)>2){var E=G.moveLastPosition.interpolate(G.moveCurrentPosition,-4);f(E.x,E.y,500,true)}}else{if(G.settings.dblTapEnabled==true&&G.touch.lastTouchEndTime!=0&&new Date().getTime()-G.touch.lastTouchEndTime<400){var F=G.touch.lastTouchPositionArr[0];j(F.x,F.y)}G.touch.lastTouchEndTime=new Date().getTime()}}function f(M,G,K,L){q(h.PAN);var N=i.data("smartZoomData");N.moveLastPosition.x=N.moveCurrentPosition.x;N.moveLastPosition.y=N.moveCurrentPosition.y;var H=i.offset();var F=w();var I=H.left+(M-N.moveCurrentPosition.x);var E=H.top+(G-N.moveCurrentPosition.y);var J=k(I,E,F.width,F.height);v(h.PAN,h.START,false);e(i,J.x,J.y,F.width,F.height,K,L==true?function(){v(h.PAN,h.END,false)}:null);N.moveCurrentPosition.x=M;N.moveCurrentPosition.y=G}function j(K,J){var L=i.data("smartZoomData");var M=L.originalSize;var E=w();var I=(E.width/M.width);var H=L.adjustedPosInfos.scale;var G=parseFloat(L.settings.dblClickMaxScale);var F;if(I.toFixed(2)>G.toFixed(2)||Math.abs(G-I)>Math.abs(I-H)){F=G-I}else{F=H-I}y.zoom(F,{"x":K,"y":J})}function q(H){var G=i.data("smartZoomData");if(G.transitionObject){if(G.transitionObject.cssAnimHandler){i.off(a.support.transition,G.transitionObject.cssAnimTimer)}var E=G.originalSize;var I=w();var F=new Object();F[G.transitionObject.transition]="all 0s";if(G.transitionObject.css3dSupported){F[G.transitionObject.transform]="translate3d("+I.x+"px, "+I.y+"px, 0) scale3d("+I.width/E.width+","+I.height/E.height+", 1)"}else{F[G.transitionObject.transform]="translateX("+I.x+"px) translateY("+I.y+"px) scale("+I.width/E.width+","+I.height/E.height+")"}i.css(F)}else{i.stop()}s();if(H!=null){v(H,"",true)}}function k(K,J,H,E){var I=i.data("smartZoomData");var F=Math.min(I.adjustedPosInfos.top,J);F+=Math.max(0,(I.adjustedPosInfos.top+I.adjustedPosInfos.height)-(F+E));var G=Math.min(I.adjustedPosInfos.left,K);G+=Math.max(0,(I.adjustedPosInfos.left+I.adjustedPosInfos.width)-(G+H));return new B(G.toFixed(2),F.toFixed(2))}function l(E){i.unbind("load.smartZoom");y.init.apply(i,[E.data.arguments])}function g(){var I=i.data("smartZoomData");var L=I.containerDiv;var J=I.originalSize;var F=L.parent().offset();var M=o(I.settings.left,F.left,L.parent().width());var G=o(I.settings.top,F.top,L.parent().height());L.offset({left:M,top:G});L.width(z(I.settings.width,L.parent().width(),M-F.left));L.height(z(I.settings.height,L.parent().height(),G-F.top));var N=p(L);var K=Math.min(Math.min(N.width/J.width,N.height/J.height),1).toFixed(2);var H=J.width*K;var E=J.height*K;I.adjustedPosInfos={"left":(N.width-H)/2+F.left,"top":(N.height-E)/2+F.top,"width":H,"height":E,"scale":K};q();e(i,I.adjustedPosInfos.left,I.adjustedPosInfos.top,H,E,0,function(){i.css("visibility","visible")});s()}function e(M,H,N,G,Q,J,P){var L=i.data("smartZoomData");var F=L.containerDiv.offset();var I=H-F.left;var O=N-F.top;if(L.transitionObject!=null){var K=L.originalSize;var E=new Object();E[L.transitionObject.transform+"-origin"]="0 0";E[L.transitionObject.transition]="all "+J/1000+"s ease-out";if(L.transitionObject.css3dSupported){E[L.transitionObject.transform]="translate3d("+I+"px, "+O+"px, 0) scale3d("+G/K.width+","+Q/K.height+", 1)"}else{E[L.transitionObject.transform]="translateX("+I+"px) translateY("+O+"px) scale("+G/K.width+","+Q/K.height+")"}if(P!=null){L.transitionObject.cssAnimHandler=P;M.one(a.support.transition.end,L.transitionObject.cssAnimHandler)}M.css(E)}else{M.animate({"margin-left":I,"margin-top":O,"width":G,"height":Q},{duration:J,easing:L.settings.easing,complete:function(){if(P!=null){P()}}})}}function w(L){var K=i.data("smartZoomData");var F=i.width();var O=i.height();var J=i.offset();var N=parseInt(J.left);var M=parseInt(J.top);var E=K.containerDiv.offset();if(L!=true){N=parseInt(N)-E.left;M=parseInt(M)-E.top}if(K.transitionObject!=null){var H=i.css(K.transitionObject.transform);if(H&&H!=""&&H.search("matrix")!=-1){var G;var I;if(H.search("matrix3d")!=-1){I=H.replace("matrix3d(","").replace(")","").split(",");G=I[0]}else{I=H.replace("matrix(","").replace(")","").split(",");G=I[3];N=parseFloat(I[4]);M=parseFloat(I[5]);if(L){N=parseFloat(N)+E.left;M=parseFloat(M)+E.top}}F=G*F;O=G*O}}return{"x":N,"y":M,"width":F,"height":O}}function v(E,H,G){var J=i.data("smartZoomData");var F="";if(G==true&&J.currentActionType!=E){F=J.currentActionType+"_"+h.END;J.currentActionType="";J.currentActionStep=""}else{if(J.currentActionType!=E||J.currentActionStep==h.END){J.currentActionType=E;J.currentActionStep=h.START;F=J.currentActionType+"_"+J.currentActionStep}else{if(J.currentActionType==E&&H==h.END){J.currentActionStep=h.END;F=J.currentActionType+"_"+J.currentActionStep;J.currentActionType="";J.currentActionStep=""}}}if(F!=""){var I=jQuery.Event(F);I.targetRect=w(true);I.scale=I.targetRect.width/J.originalSize.width;i.trigger(I)}}function C(){var G=document.body||document.documentElement;var L=G.style;var K=["transition","WebkitTransition","MozTransition","MsTransition","OTransition"];var H=["transition","-webkit-transition","-moz-transition","-ms-transition","-o-transition"];var I=["transform","-webkit-transform","-moz-transform","-ms-transform","-o-transform"];var F=K.length;var M;for(var J=0;J<F;J++){if(L[K[J]]!=null){transformStr=I[J];var E=a('<div style="position:absolute;">Translate3d Test</div>');a("body").append(E);M=new Object();M[I[J]]="translate3d(20px,0,0)";E.css(M);css3dSupported=((E.offset().left-a("body").offset().left)==20);E.empty().remove();if(css3dSupported){return{transition:H[J],transform:I[J],css3dSupported:css3dSupported}}}}return null}function z(G,F,E){if(G.search&&G.search("%")!=-1){return(F-E)*(parseInt(G)/100)}else{return parseInt(G)}}function o(G,F,E){if(G.search&&G.search("%")!=-1){return F+E*(parseInt(G)/100)}else{return F+parseInt(G)}}function A(){g()}function p(E){var H=E.offset();if(!H){return null}var G=H.left;var F=H.top;return{"x":G,"y":F,"width":E.outerWidth(),"height":E.outerHeight()}}function B(E,F){this.x=E;this.y=F;this.toString=function(){return"(x="+this.x+", y="+this.y+")"};this.interpolate=function(I,H){var G=H*this.x+(1-H)*I.x;var J=H*this.y+(1-H)*I.y;return new B(G,J)};this.distance=function(G){return Math.sqrt(Math.pow((G.y-this.y),2)+Math.pow((G.x-this.x),2))}}}})(jQuery);(function(a){a.extend(a.easing,{smartZoomEasing:function(f,g,e,i,h){return a.easing["smartZoomOutQuad"](f,g,e,i,h)},smartZoomOutQuad:function(f,g,e,i,h){return -i*(g/=h)*(g-2)+e}})})(jQuery);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(c){function b(g){var l=g||window.event,j=[].slice.call(arguments,1),f=0,h=true,k=0,e=0;g=c.event.fix(l);g.type="mousewheel";if(l.wheelDelta){f=l.wheelDelta/120}if(l.detail){f=-l.detail/3}e=f;if(l.axis!==undefined&&l.axis===l.HORIZONTAL_AXIS){e=0;k=-1*f}if(l.wheelDeltaY!==undefined){e=l.wheelDeltaY/120}if(l.wheelDeltaX!==undefined){k=-1*l.wheelDeltaX/120}j.unshift(g,f,k,e);return(c.event.dispatch||c.event.handle).apply(this,j)}var a=["DOMMouseScroll","mousewheel"];if(c.event.fixHooks){for(var d=a.length;d;){c.event.fixHooks[a[--d]]=c.event.mouseHooks}}c.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var f=a.length;f;){this.addEventListener(a[--f],b,false)}}else{this.onmousewheel=b}},teardown:function(){if(this.removeEventListener){for(var f=a.length;f;){this.removeEventListener(a[--f],b,false)}}else{this.onmousewheel=null}}};c.fn.extend({mousewheel:function(f){return f?this.bind("mousewheel",f):this.trigger("mousewheel")},unmousewheel:function(f){return this.unbind("mousewheel",f)}})})(jQuery);function transitionEnd(){var c=document.createElement("bootstrap");var b={"WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend","transition":"transitionend"};for(var a in b){if(c.style[a]!==undefined){return{end:b[a]}}}return false}$.fn.emulateTransitionEnd=function(c){var b=false,a=this;$(this).one($.support.transition.end,function(){b=true});var d=function(){if(!b){$(a).trigger($.support.transition.end)}};setTimeout(d,c);return this};$(function(){$.support.transition=transitionEnd()});