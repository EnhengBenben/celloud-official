$(function(){var e=location.href;$("ul.sort-list li a").each(function(t){$("ul.sort-list li a").eq(t).click(function(){var r=$("ul.sort-list li").eq(t).attr("class"),s=$("ul.sort-list li a").eq(t).children("i").attr("class"),i=$("ul.sort-list li a").eq(t).attr("default"),a=$("ul.sort-list li a").eq(t).attr("d-order");("current"==r&&"down"==s||"current"!=r&&"asc"==i)&&(a=$("ul.sort-list li a").eq(t).attr("a-order"));var n=/order=[\w_-]+/;return""==a?void(location.href=e.replace(/(&|\?)order=[\w_-]+/,"")):void(e.match(n)?location.href=e.replace(n,"order="+a):e.match(/\?/)?location.href=e+"&order="+a:location.href=e+"?order="+a)})})}),KISSY.use("node",function(e,t){var r={init:function(){r.k=e.all;var t=this;if(r.k(".tabBox .J_single").each(function(e,t){keysrc[keysrc.length]=r.k(e).attr("s-key")}),t.keysrc=keysrc,filter&&""!=filter)t.filter=filter;else if(t.filter="",keysrc.length){for(var s=0;s<keysrc.length;s++)t.filter+=keysrc[s]+":all,";t.filter=t.filter.substring(0,t.filter.length-1)}t.curId=currentCategoryId,t.tag=tag,t.order=order,t.searchURL=searchUrl,t.run=!0,t.times=!0,t.times1=!0,t.pid="",t.Arr=[];var i='<div class="dd-box">'+t.getM(navigation.result)+"</div>";r.k(".conn").html(i),currentCategoryId?t.searchlist(currentCategoryId):(t.chushi(navigation.result),t.eachlink())},chushi:function(t){var s=this,i='<div class="list-left">产品分类：</div><div class="list-right list-kind-right">';e.each(t,function(e,t){i+='<a href="'+s.searchURL+e.id+"?tag="+encodeURIComponent(s.tag)+'" target="_self" class="linkage">'+e.name+"</a>"}),i+="</div>",s.tag?r.k(".drop").html('<div class="tip_con"><div class="text">标签 &gt;</div><div class="tip"><span>'+s.tag+'</span><a class="close" href="'+s.searchURL+s.curId+'" target="_self"> </a></div></div>'):(r.k(".drop").remove(),r.k(".kind").css("top",0)),r.k(".kind").html(i)},getM:function(t){var r=this,s="";return e.each(t,function(e,t){var i="";e.hasChild&&(i+=r.getM(e.childCategories)),s+='<span span-id="'+e.id+'" >'+e.name+'</span><div class="dd-box">'+i+"</div>"}),s+=""},searchlist:function(e){var t=this;r.k(".conn").all("span").each(function(s,i){if(parseInt(r.k(s).attr("span-id"))==e){if(t.times){if(r.k(s).next().children().length){var a='<div class="list-left">产品分类：</div><div class="list-right list-kind-right">';r.k(s).next().children("span").each(function(e,s){a+='<a href="'+t.searchURL+r.k(e).attr("span-id")+"/?tag="+encodeURIComponent(t.tag)+'" target="_self" class="linkage">'+r.k(e).text()+"</a>"}),a+="</div>",r.k(".kind").html(a)}else r.k(".kind").remove();t.times=!1}if(t.tag&&t.times1){var n='<div class="tip_con"><div class="text">标签 &gt;</div><div class="tip"><span>'+t.tag+'</span><a class="close" href="'+t.searchURL+encodeURIComponent(t.curId)+'" target="_self"></a></div></div></div>';r.k(".drop .list-left").after(n),t.times1=!1}var l='<div class="list-three"><div class="gt" style="float:left;">&gt;</div><div class="select2">'+r.k(s).text()+'<i class="triangle triangle-t"></i><div class="span_con2">';if(r.k(s).parent().children("span").each(function(e,s){l+='<a href="'+t.searchURL+encodeURIComponent(r.k(e).attr("span-id"))+"/?tag="+t.tag+'" target="_self" class="linkage">'+r.k(e).text()+"</a>"}),l+="</div></div></div>",r.k(".drop .list-left").after(l),r.k(s).parent().parent().hasClass("conn"))t.listthree();else{var c=parseInt($(s).parent().prev().attr("span-id"));t.searchlist(c)}}})},listthree:function(){var e=this,t=null;r.k(".list-three .select2").on("mouseover mouseout",function(e){var s=r.k(this);"MOUSEOUT"==e.type.toUpperCase()?t=setTimeout(function(){s.children(".span_con2").hide(),r.k("p.line").hide(),s.parent(".list-three").css("border-color","#ccc"),s.children(".span_con2").css("border-color","#ff6600"),s.removeClass("clicked")},100):(t&&(clearTimeout(t),t=null),r.k(".span_con2").hide(),r.k(".select2").removeClass("clicked"),s.children(".span_con2").show(),s.parent().children("p.line").show(),s.parent(".list-three").css("border-color","#ff6600").siblings().css("border-color","#ccc"),s.children(".span_con2").css("border-color","#ff6600"),s.removeClass("clicked").addClass("clicked"))}),e.eachlink()},SplitDate:function(e,t){var r=[];return r=t.split(e)},eachlink:function(){var e=this;r.k(".tabBox .J_single").each(function(t,s){r.k(t).all(".list-right a").each(function(t,s){onesrc=e.SplitDate(",",e.filter);for(var i=0;i<onesrc.length;i++){onesrc1=e.SplitDate(":",onesrc[i]);for(var a=0;a<onesrc1.length;a++)onesrc1[0]==r.k(t).parent(".J_single").attr("s-key")&&onesrc1[1]==r.k(t).attr("key-v")&&r.k(t).addClass("current").siblings().removeClass("current")}})}),e.genglink()},genglink:function(){var e=this;r.k(".tabBox .J_single").each(function(t,s){r.k(t).all(".list-right a").each(function(s,i){r.k(s).attr("href",e.searchURL+e.curId+"/?tag="+encodeURIComponent(e.tag)+"&filter="+encodeURIComponent(e.gengsrc(e.filter,r.k(t).attr("s-key"),r.k(s).attr("key-v"))))})})},gengsrc:function(e,t,r){var s=this,i="";onesrc=s.SplitDate(",",e);for(var a=0;a<onesrc.length;a++)onesrc1=s.SplitDate(":",onesrc[a]),onesrc1[0]==t&&(onesrc1[1]=r),i+=onesrc1[0]+":"+onesrc1[1]+",";return i=i.substring(0,i.length-1)}};r.init()});